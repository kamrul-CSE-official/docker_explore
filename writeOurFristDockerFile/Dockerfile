# এখানে মূলত আমারা আমাদের প্রজেক্ট এ node js এর কোন ভার্রসন ইউস করবো সেটা বলে দিচ্ছি।
FROM node:20


# Docker এ মূলত আমার এই প্রজেক্টটা রান করব এই জন্য এটি image এর উপর ভেইস করে একটা কন্টিনার ক্রিয়েট করবে যেটা কিনা আমাদের প্রজেক্ট। 
# এখন আমি চাই Docker কন্টিনার ক্রিয়েট করে আমার কোড রাখুক সমস্যা নাই কিন্তু সে যেন কার কন্টিনারের ভিতরে app নামে একটা ফাইল ক্রিয়েট করে সেখানে রাখুক। এখন এখানে app নাম দিয়েছি। আপনি যে কোন নাম দিতে পারেন।
WORKDIR /app


# এখানে আমারা আগে package.json ফাইলটা কপি করে পেলে ইনস্টল করে পেলতাছি আমাদের কাজের অপটিমাইজ করার জন্য এর পর বাকি সব কোড কপি করছি। 
COPY package.json .


# আমারা আমাদের লোকাল মিসিনে কোড রান করার জন্য npm run install দিই যাতে সব ডিপেন্ডডেসি ইনস্টল হতে পারে । docker এর বেলায়ও সেইম কাজ। তবে এই ক্ষেত্রে সব কিছু ইনস্টল হবে কন্টিনারের ভিতরের app ফাইলের মধ্যে কারন আমারা আগে ওকে workdir বলে দিয়েছি।
RUN npm install


# এখানে copy এর পর ডট ডট দেয়ার মানি হলো আমার যত কোড আছে সব যেন সে কন্টিনারে কপি করে দিয়ে যাই কারন কোন একটা ফাইল যদি মিসিং হয় তখন কোড কাাজ করবে না।
COPY . .



# এখানে docker যে আমার প্রজেক্ট রান করবে ওকে একটা port বলে দিতে হবে। তবে মনে রাখতে হবে এখানে যেই পোর্ট দিব প্রেজেক্ট এর ভিতেরও সেইম পোর্ট দিতে হবে না হয় কাজ করবে না।
EXPOSE 5000


# আমারা আমাদের প্রজেক্ট রান করার জন্য আমাদের মিসিনে npm run dev এটি ইসউ করি । কিন্তু আমাদের প্রজেক্টটি docker এ কন্টিনারে ভিরে রান হবে তাই সেখানে আমাদেরকে CMD দিয়ে এ্যারে মাধ্যমে কমান্ডটি দিতে হবে, এটাই নিয়ম এখানে।
CMD [ "npm", "run", "dev" ]


